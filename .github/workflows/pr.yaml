name: "Build PDF for Pull Request"
on:
  pull_request:
    branches:
      - main
    paths-ignore:
      - '**/*.md'
      - .gitignore
      - .overleaf
jobs:
  build-tex-sources:
    name: 'Build TeX Sources'
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v2
      - name: Build PDF document
        run: make PDFOUT_BASENAME=resume-pr pdf
      - name: Cut Release
        uses: ncipollo/release-action@v1
        with:
          env:
            DATE=$(date -u +"%Y%m%dT%H%M%S")
          artifacts: "src/resume-*.pdf"
          token: ${{ secrets.GITHUB_TOKEN }}
          tag: ${{ env.DATE }}
          artifactContentType: "application/x-pdf"

